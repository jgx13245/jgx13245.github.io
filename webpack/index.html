<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack | 小奶鑫的主页</title>
    <meta name="description" content="冀光鑫的博客">
    
    
    <link rel="preload" href="/assets/css/0.styles.5e739af7.css" as="style"><link rel="preload" href="/assets/js/app.296096c9.js" as="script"><link rel="preload" href="/assets/js/2.93ca5cf4.js" as="script"><link rel="preload" href="/assets/js/34.21aa3ad6.js" as="script"><link rel="prefetch" href="/assets/js/10.9da8529d.js"><link rel="prefetch" href="/assets/js/11.0c495190.js"><link rel="prefetch" href="/assets/js/12.f4413bf4.js"><link rel="prefetch" href="/assets/js/13.53177617.js"><link rel="prefetch" href="/assets/js/14.1907b3b2.js"><link rel="prefetch" href="/assets/js/15.751bef3a.js"><link rel="prefetch" href="/assets/js/16.cb7376b9.js"><link rel="prefetch" href="/assets/js/17.70c81bbb.js"><link rel="prefetch" href="/assets/js/18.fc239933.js"><link rel="prefetch" href="/assets/js/19.4543169f.js"><link rel="prefetch" href="/assets/js/20.0e80446e.js"><link rel="prefetch" href="/assets/js/21.050f4549.js"><link rel="prefetch" href="/assets/js/22.5c39a6b4.js"><link rel="prefetch" href="/assets/js/23.11fd4741.js"><link rel="prefetch" href="/assets/js/24.68d31a36.js"><link rel="prefetch" href="/assets/js/25.c463a95c.js"><link rel="prefetch" href="/assets/js/26.8ad8574a.js"><link rel="prefetch" href="/assets/js/27.96ed4f89.js"><link rel="prefetch" href="/assets/js/28.e61163e0.js"><link rel="prefetch" href="/assets/js/29.4eb96332.js"><link rel="prefetch" href="/assets/js/3.ddf3a79c.js"><link rel="prefetch" href="/assets/js/30.3f3303d4.js"><link rel="prefetch" href="/assets/js/31.60daf47b.js"><link rel="prefetch" href="/assets/js/32.cb4bce1b.js"><link rel="prefetch" href="/assets/js/33.113ec68f.js"><link rel="prefetch" href="/assets/js/35.9dca379f.js"><link rel="prefetch" href="/assets/js/4.7eb02300.js"><link rel="prefetch" href="/assets/js/5.c4657d68.js"><link rel="prefetch" href="/assets/js/6.4851ba8e.js"><link rel="prefetch" href="/assets/js/7.db35e16c.js"><link rel="prefetch" href="/assets/js/8.951bbc33.js"><link rel="prefetch" href="/assets/js/9.afbec623.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5e739af7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">小奶鑫的主页</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/Interview/" class="nav-link">面试基础</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端三剑客</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HTML/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/CSS/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/" class="nav-link">JavaScript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/EditPrinciple/" class="nav-link">编译原理</a></li><li class="dropdown-item"><!----> <a href="/Http/" class="nav-link">http原理</a></li><li class="dropdown-item"><!----> <a href="/DesignModle/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">数据结构和算法</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HandFunction/" class="nav-link">手写前端方法</a></li><li class="dropdown-item"><!----> <a href="/DataStructure/" class="nav-link">数据结构</a></li><li class="dropdown-item"><!----> <a href="/algorithm/" class="nav-link">算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">运行环境</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BrowserApi/" class="nav-link">浏览器的API</a></li><li class="dropdown-item"><!----> <a href="/BrowserPrinciple/" class="nav-link">浏览器的缓存原理</a></li><li class="dropdown-item"><!----> <a href="/Node/" class="nav-link">Node</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">框架和类库</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/React/" class="nav-link">react</a></li><li class="dropdown-item"><!----> <a href="/Vue/" class="nav-link">vue</a></li><li class="dropdown-item"><!----> <a href="/MoreDevelopment/" class="nav-link">多端开发</a></li><li class="dropdown-item"><!----> <a href="/ES6/" class="nav-link">ES6</a></li><li class="dropdown-item"><!----> <a href="/DeBugs/" class="nav-link">开发和调试</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端工程</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link router-link-exact-active router-link-active">webpack</a></li><li class="dropdown-item"><!----> <a href="/Git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/nginx/" class="nav-link">nginx</a></li><li class="dropdown-item"><!----> <a href="/UpPerformance/" class="nav-link">性能提升</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端安全</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Xss/" class="nav-link">xss</a></li><li class="dropdown-item"><!----> <a href="/Csrf/" class="nav-link">csrf</a></li><li class="dropdown-item"><!----> <a href="/HttpAttack/" class="nav-link">http劫持</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/Interview/" class="nav-link">面试基础</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端三剑客</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HTML/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/CSS/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/" class="nav-link">JavaScript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">计算机基础</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/EditPrinciple/" class="nav-link">编译原理</a></li><li class="dropdown-item"><!----> <a href="/Http/" class="nav-link">http原理</a></li><li class="dropdown-item"><!----> <a href="/DesignModle/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">数据结构和算法</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/HandFunction/" class="nav-link">手写前端方法</a></li><li class="dropdown-item"><!----> <a href="/DataStructure/" class="nav-link">数据结构</a></li><li class="dropdown-item"><!----> <a href="/algorithm/" class="nav-link">算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">运行环境</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BrowserApi/" class="nav-link">浏览器的API</a></li><li class="dropdown-item"><!----> <a href="/BrowserPrinciple/" class="nav-link">浏览器的缓存原理</a></li><li class="dropdown-item"><!----> <a href="/Node/" class="nav-link">Node</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">框架和类库</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/React/" class="nav-link">react</a></li><li class="dropdown-item"><!----> <a href="/Vue/" class="nav-link">vue</a></li><li class="dropdown-item"><!----> <a href="/MoreDevelopment/" class="nav-link">多端开发</a></li><li class="dropdown-item"><!----> <a href="/ES6/" class="nav-link">ES6</a></li><li class="dropdown-item"><!----> <a href="/DeBugs/" class="nav-link">开发和调试</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端工程</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/" class="nav-link router-link-exact-active router-link-active">webpack</a></li><li class="dropdown-item"><!----> <a href="/Git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/nginx/" class="nav-link">nginx</a></li><li class="dropdown-item"><!----> <a href="/UpPerformance/" class="nav-link">性能提升</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端安全</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Xss/" class="nav-link">xss</a></li><li class="dropdown-item"><!----> <a href="/Csrf/" class="nav-link">csrf</a></li><li class="dropdown-item"><!----> <a href="/HttpAttack/" class="nav-link">http劫持</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/webpack/" class="active sidebar-link">webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/#webpack4-学习之路（1）-起源" class="sidebar-link">webpack4 学习之路（1）-起源</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/#一、开篇小啰嗦" class="sidebar-link">一、开篇小啰嗦</a></li><li class="sidebar-sub-header"><a href="/webpack/#二、开发模式的演变" class="sidebar-link">二、开发模式的演变</a></li></ul></li><li class="sidebar-sub-header"><a href="/webpack/#webpack4-学习之路（2）-安装" class="sidebar-link">webpack4 学习之路（2）-安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/#一、开篇小啰嗦-2" class="sidebar-link">一、开篇小啰嗦</a></li><li class="sidebar-sub-header"><a href="/webpack/#二、开始安装吧" class="sidebar-link">二、开始安装吧</a></li></ul></li><li class="sidebar-sub-header"><a href="/webpack/#webpack4-学习之路（3）-配置文件" class="sidebar-link">webpack4 学习之路（3）-配置文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/#一、开篇小啰嗦-3" class="sidebar-link">一、开篇小啰嗦</a></li><li class="sidebar-sub-header"><a href="/webpack/#二、开始配置吧" class="sidebar-link">二、开始配置吧</a></li></ul></li><li class="sidebar-sub-header"><a href="/webpack/#webpack4-学习之路（4）-核心概念" class="sidebar-link">webpack4 学习之路（4）-核心概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/#一、开篇小啰嗦-4" class="sidebar-link">一、开篇小啰嗦</a></li><li class="sidebar-sub-header"><a href="/webpack/#二、核心概念-loader" class="sidebar-link">二、核心概念-loader</a></li><li class="sidebar-sub-header"><a href="/webpack/#三、webpack的plugins使打包更加便捷" class="sidebar-link">三、webpacK的plugins使打包更加便捷</a></li><li class="sidebar-sub-header"><a href="/webpack/#四、entry和output的基本配置" class="sidebar-link">四、entry和output的基本配置</a></li><li class="sidebar-sub-header"><a href="/webpack/#五、sourcemap的配置" class="sidebar-link">五、sourceMap的配置</a></li><li class="sidebar-sub-header"><a href="/webpack/#六、使用webpackdevserver提升开发的效率" class="sidebar-link">六、使用WebpackDevServer提升开发的效率</a></li><li class="sidebar-sub-header"><a href="/webpack/#七、hot-module-replacement-热模块更新" class="sidebar-link">七、Hot Module Replacement 热模块更新</a></li><li class="sidebar-sub-header"><a href="/webpack/#八、使用bable处理es6语法" class="sidebar-link">八、使用bable处理Es6语法</a></li><li class="sidebar-sub-header"><a href="/webpack/#webpakc总体流程" class="sidebar-link">webpakc总体流程</a></li></ul></li><li class="sidebar-sub-header"><a href="/webpack/#webpack4-学习之路（5）-高级概念" class="sidebar-link">webpack4 学习之路（5）-高级概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack/#一、tree-shaking-概念以及如何使用" class="sidebar-link">一、Tree shaking 概念以及如何使用</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack"><a href="#webpack" aria-hidden="true" class="header-anchor">#</a> webpack</h1> <p><a href="https://juejin.im/post/5d398234518825121c007123" target="_blank" rel="noopener noreferrer">webpack学习之路，点击去。点击去。点进去<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="webpack4-学习之路（1）-起源"><a href="#webpack4-学习之路（1）-起源" aria-hidden="true" class="header-anchor">#</a> webpack4 学习之路（1）-起源</h2> <h3 id="一、开篇小啰嗦"><a href="#一、开篇小啰嗦" aria-hidden="true" class="header-anchor">#</a> 一、开篇小啰嗦</h3> <blockquote><p>开始讲解之前，我们先了解一下为什么要使用webpack. webpack到底可以干什么啊？</p></blockquote> <h3 id="二、开发模式的演变"><a href="#二、开发模式的演变" aria-hidden="true" class="header-anchor">#</a> 二、开发模式的演变</h3> <h4 id="_1-面向过程开发"><a href="#_1-面向过程开发" aria-hidden="true" class="header-anchor">#</a> 1.面向过程开发</h4> <p><strong>特点</strong>：乱七八糟。爱咋引就咋引</p> <p>那个时候没有什么规范，一个html引入一个js文件。所有的js代码。全部写到一个js文件里面。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!html的页面</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// index.js代码</span>
<span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// header模块</span>
<span class="token keyword">var</span> header <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
header<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'header'</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// content模块</span>
<span class="token keyword">var</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
content<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'content'</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// footer模块</span>
<span class="token keyword">var</span> footer <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
footer<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'footer'</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>footer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>问题来了，一个简单的头部，内容，尾部的布局，需要写在一个js文件。要是几十个上百个模块。是不是就多的爆炸。找问题，能累死</strong></p> <h4 id="_2-面向对象开发"><a href="#_2-面向对象开发" aria-hidden="true" class="header-anchor">#</a> 2.面向对象开发</h4> <p><strong>特点</strong>：把js的代码一块块的分割，每个部分就是一个单独的js的代码，遇到问题，快速查找，容易维护</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- index.html代码 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>这里是我们网页的内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./src/header.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./src/content.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./src/footer.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// header.js</span>
<span class="token keyword">function</span> <span class="token function">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> header <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  header<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'header'</span><span class="token punctuation">;</span>
  root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// content.js</span>
<span class="token keyword">function</span> <span class="token function">Content</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  header<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'content'</span><span class="token punctuation">;</span>
  root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// footer.js</span>
<span class="token keyword">function</span> <span class="token function">Footer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> footer <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  header<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'footer'</span><span class="token punctuation">;</span>
  root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>footer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// index.js代码</span>
<span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Footer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>大家好，我叫问题，我又来了。请问。js代码分隔开了，好处理了。html怎么办。一下子引入这么多js,而且顺序不能乱。否则就报错。少了还好，如果几百上千个咋整啊。我怎么拍顺序啊。</strong></p> <h4 id="_3-模块开发模式"><a href="#_3-模块开发模式" aria-hidden="true" class="header-anchor">#</a> 3.模块开发模式</h4> <p><strong>特点</strong>：html 还是引入一个js代码，js代码还是分开。用模块化工具管理。咋看咋舒服。随后各种模块化加载越来越多，例如：ES Module（es6）以及CommonJS(服务端，node)等，我们介绍ES Module模块化加载方案，当然其他模块化标准也是生效的</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- index.html代码 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>这里是我们网页的内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// header.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> header <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  header<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'header'</span><span class="token punctuation">;</span>
  root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// content.js代码</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Content</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  content<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'content'</span><span class="token punctuation">;</span>
  root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// footer.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Footer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> footer <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  footer<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'footer'</span><span class="token punctuation">;</span>
  root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>footer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// index.js代码</span>
<span class="token keyword">import</span> Header <span class="token keyword">from</span> <span class="token string">'./src/header.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Content <span class="token keyword">from</span> <span class="token string">'./src/content.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Footer <span class="token keyword">from</span> <span class="token string">'./src/footer.js'</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Footer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>看的很爽啊，这样js代码既能分开，html也只需要自己引入一个js文件，爽啊，爽啊。哈哈，大家好。我叫浏览器，我不同意，怎么办。webpack来了。webpack就是编译一下，让浏览器同意</strong></p> <p><font color="red">webpack也不是单纯的js编译器，官网和新定义是模块打包工具</font></p> <h2 id="webpack4-学习之路（2）-安装"><a href="#webpack4-学习之路（2）-安装" aria-hidden="true" class="header-anchor">#</a> webpack4 学习之路（2）-安装</h2> <h3 id="一、开篇小啰嗦-2"><a href="#一、开篇小啰嗦-2" aria-hidden="true" class="header-anchor">#</a> 一、开篇小啰嗦</h3> <blockquote><p>上一篇文章说了，浏览器不会同意我们使用ES module模块化方式写代码。它不认，此时webpack出马就可以解决这个问题 。</p></blockquote> <h3 id="二、开始安装吧"><a href="#二、开始安装吧" aria-hidden="true" class="header-anchor">#</a> 二、开始安装吧</h3> <ol><li>默认你装好node环境了啊。在桌面新建一个文件夹，创建一个node的包文件，生成一个package.json文件。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>npm init 
</code></pre></div><ol start="2"><li>全局安装webpack</li></ol> <div class="language- extra-class"><pre class="language-text"><code>npm install webpack webpack-cli -g
</code></pre></div><p><strong>大家好，我叫问题。我又来了，这个webpack是在全局安装的，如果你有两个项目，一个依赖是webpack3,一个依赖webpack4.那么webpack3项目就废了。所以这种全局的也不一定好使，最好那个项目用，那个项目本身安装webpack4,别打扰别人</strong></p> <ol start="3"><li>全局卸载掉</li></ol> <div class="language- extra-class"><pre class="language-text"><code>npm uninstall webpack webpack-cli -g
</code></pre></div><ol start="4"><li>进入项目文件夹</li></ol> <div class="language- extra-class"><pre class="language-text"><code>npm install webpack webpack-cli -D 或者 npm install webpack webpack-cli --save-dev
</code></pre></div><p>5.检查webpack版本号</p> <div class="language- extra-class"><pre class="language-text"><code>npx webpack -v
</code></pre></div><p><strong>如果你直接输入webpack -v,是直接默认查看你的全局webpack。现在我们卸载了，所以是空。node提供npx,可以查看本文件的安装情况</strong></p> <ol start="3"><li>版本号安装</li></ol> <div class="language- extra-class"><pre class="language-text"><code>npm install webpack@4.25.0 -D
</code></pre></div><h2 id="webpack4-学习之路（3）-配置文件"><a href="#webpack4-学习之路（3）-配置文件" aria-hidden="true" class="header-anchor">#</a> webpack4 学习之路（3）-配置文件</h2> <h3 id="一、开篇小啰嗦-3"><a href="#一、开篇小啰嗦-3" aria-hidden="true" class="header-anchor">#</a> 一、开篇小啰嗦</h3> <blockquote><p>安装完，就该开始配置了。为什么webpack需要配置啊。我们说过webpack是个模块打包工具，但是打包js,图片，或者其他的后缀的文件，打包的流程肯定不一样的，所以需要配置文件。另外，webpack开发团队为了我们使用的爽。会有个一个文件默认配置基本的代码，我们就是在这个文件下修改代码。配置以满足我们的项目需求</p></blockquote> <h3 id="二、开始配置吧"><a href="#二、开始配置吧" aria-hidden="true" class="header-anchor">#</a> 二、开始配置吧</h3> <h4 id="_1-创建基础配置文件"><a href="#_1-创建基础配置文件" aria-hidden="true" class="header-anchor">#</a> 1.创建基础配置文件</h4> <p>在总结一下需要输入的命令吧</p> <div class="language- extra-class"><pre class="language-text"><code>1. npm init(生成node规范的文件)

2. npm install webpack webpack-cli -D （进入项目文件夹，局部安装webpack）

3. 把第一章的几个js，html文件自己手动创建

4. 手动创建 webpack.config.js文件

</code></pre></div><p>命令敲完，应该会形成一个下面的目录</p> <div class="language- extra-class"><pre class="language-text"><code>|-- webpack(名字随便起)
|   |-- index.html
|   |-- index.js
|   |-- header.js
|   |-- content.js
|   |-- footer.js
|   |-- webpack.config.js
|   |-- package.json
</code></pre></div><p>webpack.config.js文件里面写代码</p> <div class="language- extra-class"><pre class="language-text"><code>// path为Node的核心模块
const path = require('path');

module.exports = {
  entry: './index.js',  // 告诉webpack打包的入口文件在哪里，它从这里找，开始打包
  output: {  // 告诉webpack打好包以后放在那个文件夹。dist是自动生成的
    filename: 'main.js',
    path: path.resolve(__dirname, 'dist')
  }
}
</code></pre></div><p>package.json 修改代码为</p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;name&quot;: &quot;webpack&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;private&quot;: true,
  &quot;scripts&quot;: {
    &quot;bundle&quot;: &quot;webpack&quot;
  },
  &quot;keywords&quot;: [],
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;devDependencies&quot;: {
    &quot;webpack&quot;: &quot;^4.31.0&quot;,
    &quot;webpack-cli&quot;: &quot;^3.3.2&quot;
  }
}
</code></pre></div><p>执行命令</p> <div class="language- extra-class"><pre class="language-text"><code>npm run bundle
</code></pre></div><p>看结果</p> <h4 id="_2-webpack执行的方式小总结"><a href="#_2-webpack执行的方式小总结" aria-hidden="true" class="header-anchor">#</a> 2.webpack执行的方式小总结</h4> <p>到现在，webpack 执行方式有三种</p> <p>（1）如果你是全局安装的，就执行  webpack index.js 打包</p> <p>（2）如果你是项目安装的，就执行 npx webpack index.js 打包</p> <p>（3）你如果配置了webpack.config.js文件了，而且在packag.json里面修改了script.
直接执行 npm run bundle  不用特指index.js文件了。因为配置文件里面给你指明了</p> <h4 id="_3-看官方档案"><a href="#_3-看官方档案" aria-hidden="true" class="header-anchor">#</a> 3.看官方档案</h4> <p>讲的这里，就可以查看官网网址的开始了。看官方源码才是最原汁原味的讲解
<a href="https://webpack.js.org/guides/getting-started/" target="_blank" rel="noopener noreferrer">看官网讲解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="_4-打包完页面信息解释"><a href="#_4-打包完页面信息解释" aria-hidden="true" class="header-anchor">#</a> 4.打包完页面信息解释</h4> <p>打完包，控制台会显示很多条信息。hash,version，等等啊。这些都是打包的信息提示，告知我们打包的状况，下面我们详细解释一下信息都是啥意思：</p> <div class="language- extra-class"><pre class="language-text"><code>npm run bundle 
</code></pre></div><p><img src="https://user-gold-cdn.xitu.io/2019/7/29/16c3ba8b203ae3a4?w=2322&amp;h=624&amp;f=jpeg&amp;s=167854" alt="打包信心"></p> <ol><li><p>Hash： hash代表本次打包的唯一hash值，每一次打包此值都是不一样的</p></li> <li><p>Version： 详细展示了我们使用webpack的版本号</p></li> <li><p>Time： 代表我们本次打包的耗时</p></li> <li><p>Asset： 代表我们打包出的文件名称</p></li> <li><p>Size： 代表我们打包出的文件的大小</p></li> <li><p>Chunks： 代表打包后的.js文件对应的id，id从0开始，依次往后+1</p></li> <li><p>Chunks Names： 代表我们打包后的.js文件的名字，至于为何是main，而不是其他的内容，这是因为在我们的webpack.config.js中，entry:'./index.js'是对如下方式的简写形式：</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// path为Node的核心模块</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// entry: './index.js',</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">'./index.js'</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 其它配置</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="8"><li><p>Entrypoint main = bundle.js： 代表我们打包的入口为main</p></li> <li><p>warning in configuration： 提示警告，意思是我们没有给webpack.config.js设置mode属性，mode属性有三个值：development代表开发环境、production代表生产环境、none代表既不是开发环境也不是生产环境。如果不写的话，默认是生产环境，可在配置文件中配置此项，配置后再次打包将不会再出现此警告。</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// path为Node的核心模块</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 其它配置</span>
  mode<span class="token punctuation">:</span> <span class="token string">'development'</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="webpack4-学习之路（4）-核心概念"><a href="#webpack4-学习之路（4）-核心概念" aria-hidden="true" class="header-anchor">#</a> webpack4 学习之路（4）-核心概念</h2> <h3 id="一、开篇小啰嗦-4"><a href="#一、开篇小啰嗦-4" aria-hidden="true" class="header-anchor">#</a> 一、开篇小啰嗦</h3> <blockquote><p>基本配置完，大家就明白怎么回事了，搭建vue.react的脚手架也是从这里开始的。只不过vue的后缀是.vue，webpack不认识。有的图片，后缀是.png.webapck也不认识，所以这章节就是webpack的核心配置。解决各种遇到的问题。让webpack发光发热</p></blockquote> <h3 id="二、核心概念-loader"><a href="#二、核心概念-loader" aria-hidden="true" class="header-anchor">#</a> 二、核心概念-loader</h3> <h4 id="_1-啥是loader"><a href="#_1-啥是loader" aria-hidden="true" class="header-anchor">#</a> 1. 啥是loader</h4> <p>loader是一种打包规则，它告诉了 Webpack 在遇到非.js文件时，应该如何处理这些文件，一个项目总有很多后缀不一样的文件。这个时候你要用loader告诉webpack怎么使用loader配置。</p> <div class="language- extra-class"><pre class="language-text"><code>loader有如下几种固定的运用规则：(后面会解释)

使用test正则来匹配相应的文件
使用use来添加文件对应的loader
对于多个loader而言，从 右到左 依次调用
</code></pre></div><h4 id="_2-使用loader打包图片-file-loader-url-loader"><a href="#_2-使用loader打包图片-file-loader-url-loader" aria-hidden="true" class="header-anchor">#</a> 2.使用loader打包图片-file-loader/url-loader</h4> <p>开发场景中，几乎离不开图片，webpack怎么识别图片后缀呢？ 蹬蹬蹬蹬。。。。</p> <p><font color="red">file-loader</font>或者<font color="red">url-loader</font>，后面介绍区别。需使用npm install进行安装
现在我们重点讲解file-loader</p> <p>下面我们稍微修改一下代码，在网上随便找个图片放到项目文件夹里面</p> <div class="language- extra-class"><pre class="language-text"><code>// index.js代码
import Header from './header.js';
import Content from './content.js';
import Footer from './footer.js';
import img from './1.png';

new Header();
new Content();
new Footer();
</code></pre></div><p>再次执行，npm run bundle 会报错，为啥。因为webpack 不认识png啊。咋办呢。在webpack.config.js配置文件里面配置</p> <div class="language- extra-class"><pre class="language-text"><code>// path为Node的核心模块
const path = require('path');

module.exports = {
  entry: './index.js',  // 告诉webpack打包的入口文件在哪里，它从这里找，开始打包
  module:{ // 告诉webpack打包的模块
    rules:[{  // 遇到不同的后缀打包的规则
      test:/\.png$/, // 正则，就是说遇到这个后缀怎么办
      use:{  // 遇到上面的后缀文件就使用下面的loader
        loader:'file-loader'
      }
    }]
  },
  output: {  // 告诉webpack打好包以后放在那个文件夹。dist是自动生成的
    filename: 'main.js',
    path: path.resolve(__dirname, 'dist')
  }
}
</code></pre></div><p>配置完别忘了下载啊</p> <div class="language- extra-class"><pre class="language-text"><code>npm install file-loader -D
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>npm run bundle
</code></pre></div><p>哇擦擦擦。不报错了，解决了。</p> <p>这个时候看dist包，里面就多了一个图片</p> <p><img src="https://user-gold-cdn.xitu.io/2019/7/29/16c3bdf425d680df?w=442&amp;h=674&amp;f=jpeg&amp;s=40070" alt="打包的图片"></p> <p>这个时候再引入图片。挂在在页面上。打包就不会出错了</p> <p><strong>运用占位符</strong></p> <p>在以上打包图片的过程中，我们发现打包生成的图片好像名字是一串乱码，如果我们要原样输出原图片的名字的话，又该如何进行配置呢？这个问题，可以使用 占位符 进行解决。</p> <p>文件占位符它有一些固定的规则，像下面这样：</p> <div class="language- extra-class"><pre class="language-text"><code>[name]代表原本文件的名字
[ext]代表原本文件的后缀
[hash]代表一个md5的唯一编码
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//webpack.config.js</span>

<span class="token comment">// path为Node的核心模块</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 其它配置</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
          options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">'[name]_[hash].[ext]'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样配置生成的文件名字就变了</p> <div class="language- extra-class"><pre class="language-text"><code>|-- dist
|   |-- avatar_bd7a45571e4b5ccb8e7c33b7ce27070a.jpg
</code></pre></div><p><strong>说完了file-loader,那什么是url-loader呢</strong></p> <p>其实url-loader跟file-loader功能差不多，但是url-loader多了个功能就是图片打包的时候多了个配置项 limit</p> <div class="language- extra-class"><pre class="language-text"><code>npm install url-loader -D
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//webpack.config.js</span>

<span class="token comment">// path为Node的核心模块</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 其它配置</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
          options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">'[name]_[hash].[ext]'</span><span class="token punctuation">,</span>
            limit<span class="token punctuation">:</span><span class="token number">2000</span> <span class="token comment">// 字节判断</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>limit 的意思是如果你的图片大小超过2000个字节的话，就跟file-loader吧图片打包到dist目录下，但是如果小于2000字节，就直接默认吧图片转换成base64添加到bundle.js里面。这样就能减少不必要的图片请求。增加性能。vue脚手架的webpack配置就是这样写的啊</p> <h4 id="_3-使用loader打包静态样式-css-loader-style-loader"><a href="#_3-使用loader打包静态样式-css-loader-style-loader" aria-hidden="true" class="header-anchor">#</a> 3.使用loader打包静态样式-css-loader/style-loader</h4> <p>css打包部分就很复杂，设置很乱，因为css后缀有很多个文件，.css，.scss，.less
等等。</p> <div class="language- extra-class"><pre class="language-text"><code>打包说明

样式文件分为几种情况，每一种都需要不同的loader来处理：

普通.css文件，使用style-loader和css-loader来处理
.less文件，使用less-loader来处理
.sass或者.scss文件，需要使用sass-loader来处理
.styl文件，需要使用stylus-loader来处理
</code></pre></div><p>乍一看。我去。这么多loader,啥时候能记住啊，没事，一步步来。先说前两个</p> <p><strong>css-loader:负责解析 CSS 代码，主要是为了处理 CSS 中的依赖，例如 @import 和 url() 等引用外部文件的声明，比如一个css的文件，引入了另一个css的文件，css-loader就可以吧所有的css整合到一快。否则就是无法解析了</strong></p> <p><strong>style-loader：会将 css-loader 解析的结果转变成 JS 代码，运行时动态插入 style 标签来让 CSS 代码生效。</strong></p> <blockquote><p>样式生效以后，不会生成一个css的文件夹，webpack会通过 style-loader自动的吧样式加在头部的 style 里面</p></blockquote> <ol><li>打包css文件</li></ol> <p>首先安装style-loader和css-loader</p> <div class="language- extra-class"><pre class="language-text"><code>npm install style-loader -D
npm install css-loader -D
</code></pre></div><p>现在实战啊，</p> <p>把页面目录该删删，改加加，改成这个样子,吧头部，内容。脚步的js文件删除，在根目录新建一个src的文件夹，吧index.js移动过去</p> <div class="language- extra-class"><pre class="language-text"><code>|-- webpack(名字随便起)
|   |--src
    | |--index.js
    | |--index.css
|   |-- webpack.config.js
|   |-- package.json
</code></pre></div><p>index.js代码如下</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// index.js代码</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span><span class="token punctuation">;</span>

img<span class="token punctuation">.</span>src <span class="token operator">=</span> avatar<span class="token punctuation">;</span>
img<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'avatar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>index.css代码如下</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.avatar</span><span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span>1px solid #0f0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>webpack.config.js代码如下</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// path为Node的核心模块</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>  <span class="token comment">// 告诉webpack打包的入口文件在哪里，它从这里找，开始打包</span>
  module<span class="token punctuation">:</span><span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span><span class="token regex">/\.png$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span><span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span><span class="token string">'file-loader'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span> <span class="token comment">// 因为需要两个loader.用数组。</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 告诉webpack打好包以后放在那个文件夹。dist是自动生成的</span>
    filename<span class="token punctuation">:</span> <span class="token string">'main.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果代码中使用sass怎么办呢。这个时候就是有sass-laoder了</p> <div class="language- extra-class"><pre class="language-text"><code>npm install sass-loader -D

npm install node-sass -D
</code></pre></div><p>下载好以后，修改一下代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.js代码如下</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>  <span class="token comment">// 告诉webpack打包的入口文件在哪里，它从这里找，开始打包</span>
  module<span class="token punctuation">:</span><span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span><span class="token regex">/\.png$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span><span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span><span class="token string">'file-loader'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'sass-loader'</span><span class="token punctuation">]</span> <span class="token comment">// 因为需要两个loader.用数组。</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 告诉webpack打好包以后放在那个文件夹。dist是自动生成的</span>
    filename<span class="token punctuation">:</span> <span class="token string">'main.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 这里注意下，loader数组里面。都是从下到上，从右到左执行的，</span>
<span class="token comment">//先是把scss语法转换为css,</span>
<span class="token comment">//然后处理css文件的互相引用。</span>
<span class="token comment">//最后挂载到html上。样式生效。</span>
</code></pre></div><p>目录中的css文件改为 .scss后缀。里面的内容修改为 嵌套。就是这样</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">body</span><span class="token punctuation">{</span>
    <span class="token selector">.avatar</span><span class="token punctuation">{</span>
        .....
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>最后记得修改引用这个scss的文件的后缀</p> <p>执行打包命令。页面上。语法会转换成 css的语法，并且生效。</p> <p><strong>写到css我们就不可避免的涉及到兼容啊。浏览器厂商支持程度啊之类的问题，尤其是css3 每个浏览器厂商支持的，兼容都需要前缀。webpack有这个loader 可以帮我们实现</strong></p> <ol><li>安装这个loader</li></ol> <div class="language- extra-class"><pre class="language-text"><code>npm install postcss-lader -d
</code></pre></div><ol start="2"><li>我们先修改样式文件，加一个css3的属性transform</li></ol> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">body</span><span class="token punctuation">{</span>
  <span class="token selector">.avatar</span><span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span>1px solid #0f0<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>100px<span class="token punctuation">,</span>100px<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li><p>我们看官网的这个loader配置方式。
<a href="https://user-gold-cdn.xitu.io/2019/8/7/16c69dcf6a1596c8" target="_blank" rel="noopener noreferrer">官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p>根据官网我们得知，接下来就是在根目录下新建一个文件</p></li></ol> <p>postcss.config.js</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
   <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>别忘了下载这个插件</p> <div class="language- extra-class"><pre class="language-text"><code>npm install autoprefixer -D
</code></pre></div><p>最后别忘了在webpack.config.js里面的loader数组再加一个postcss-loader</p> <p>执行打包命令。看一下控制台的的样式  会加上厂商前缀</p> <h3 id="三、webpack的plugins使打包更加便捷"><a href="#三、webpack的plugins使打包更加便捷" aria-hidden="true" class="header-anchor">#</a> 三、webpacK的plugins使打包更加便捷</h3> <p><strong>plugins 是插件的意思，插件的意思是，在执行的过程中，来帮助webpack做一些事</strong></p> <p>上面内容我们在写的时候，有这样的一个问题。就是webpack 只管吧js css  图片等文件通过loader 打包好以后，就直接放在dist里面，不管了，我们每次都需要手动创建一个index.html。来引入打包好的js文件，这样多费劲啊，如果能自动生成html.并引入js文件那该多好啊。下面就是插件们登场的时候了</p> <ol><li><a href="https://webpack.js.org/plugins/html-webpack-plugin/#configuration" target="_blank" rel="noopener noreferrer">html-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol> <div class="language- extra-class"><pre class="language-text"><code>npm install html-webpack-plugin -D
</code></pre></div><p>这个插件就能解决上面的问题</p> <p>我们现在重新把页面目录删删减减</p> <div class="language- extra-class"><pre class="language-text"><code>|-- webpack(名字随便起)
|   |--src
    | |--1.png
    | |--index.js
    | |--index.scss
    | |--index.html
|   |-- webpack.config.js
|   |-- package.json
</code></pre></div><p>webpack.config.js代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// path为Node的核心模块</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackplugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span><span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>  <span class="token comment">// 告诉webpack打包的入口文件在哪里，它从这里找，开始打包</span>
  module<span class="token punctuation">:</span><span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span><span class="token regex">/\.png$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span><span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span><span class="token string">'url-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span><span class="token punctuation">{</span>
          name<span class="token punctuation">:</span><span class="token string">'[name]_[hash].[ext]'</span><span class="token punctuation">,</span>
          outputPath<span class="token punctuation">:</span><span class="token string">'images/'</span><span class="token punctuation">,</span>
          limit<span class="token punctuation">:</span><span class="token number">20000</span>    
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> 
            <span class="token punctuation">{</span>
              loader<span class="token punctuation">:</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span>
              options<span class="token punctuation">:</span><span class="token punctuation">{</span>
                importLoaders<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span>
                modules<span class="token punctuation">:</span><span class="token boolean">true</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
            <span class="token string">'postcss-loader'</span>
          <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackplugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 注入模板，这个html的内容会注入到自动生成的html里面</span>
    template<span class="token punctuation">:</span><span class="token string">'src/index.html'</span> 
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 告诉webpack打好包以后放在那个文件夹。dist是自动生成的</span>
    filename<span class="token punctuation">:</span> <span class="token string">'main.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>index.js的代码</p> <div class="language- extra-class"><pre class="language-text"><code>// index.js代码
import avatar from './1.png';
import style from  './index.scss';

var root = document.getElementById('root');
var img = new Image();
img.src = avatar;
img.classList.add(style.avatar);
root.appendChild(img);

</code></pre></div><p>index.html代码</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>现在吧dist 文件夹删除掉，重新打包，会发现dist文件下会自动生成html的文件，而且还自动引入了打包好的js文件</p> <p>自动生成的html文件</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>main.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li><a href="https://www.npmjs.com/package/clean-webpack-plugin" target="_blank" rel="noopener noreferrer">clean-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol> <p>假如有以下场景，我们需要修改打包好的js文件。比如现在打包好我们叫bundle.js文件。我们现在改成dist.js。文件。执行以下打包，我们发现。dist的文件重新生成一个dist.js的文件。但是。。。但是 bundle.js 这个我们上次生成的文件居然还在。这可不行。我们需要一个插件就是每次生成新的打包js文件，就把以前的清除掉</p> <div class="language- extra-class"><pre class="language-text"><code>npm install clean-webpack-plugin -D
</code></pre></div><p>webpack.config.js代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// path为Node的核心模块</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackplugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
 mode<span class="token punctuation">:</span><span class="token string">'development'</span><span class="token punctuation">,</span>
 entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>  <span class="token comment">// 告诉webpack打包的入口文件在哪里，它从这里找，开始打包</span>
 module<span class="token punctuation">:</span><span class="token punctuation">{</span>
   <span class="token operator">...</span><span class="token operator">...</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 plugins<span class="token punctuation">:</span><span class="token punctuation">[</span>
   <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 在打包之前执行，清空所有的dist内容</span>
   <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackplugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>template<span class="token punctuation">:</span><span class="token string">'src/index.html'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token punctuation">]</span><span class="token punctuation">,</span>
 output<span class="token punctuation">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 告诉webpack打好包以后放在那个文件夹。dist是自动生成的</span>
   filename<span class="token punctuation">:</span> <span class="token string">'mm.js'</span><span class="token punctuation">,</span>
   path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意版本问题，老版本的clean-webpack-plugin可能需要参数，但是新版本的不需要</p> <h3 id="四、entry和output的基本配置"><a href="#四、entry和output的基本配置" aria-hidden="true" class="header-anchor">#</a> 四、entry和output的基本配置</h3> <ol><li>entry 可以是一个字符串，也可以是一个对象。
（1）假如entry 不设置名字的话，打包就以output的filename的输出为主</li></ol> <div class="language- extra-class"><pre class="language-text"><code>entry: './src/index.js', // 入口文件
output: { //输出文件
  filename: 'app.js',
  path: path.resolve(__dirname, 'dist') // path 会在根目录生成一个dist的文件
},
</code></pre></div><blockquote><p>这种情形打包出来的是 app.js</p></blockquote> <p>(2)如果filename不设置名字，就医entry的名字为主</p> <div class="language- extra-class"><pre class="language-text"><code>entry: {
  main:'./src/index.js', // 入口文件
}
output: { //输出文件
  path: path.resolve(__dirname, 'dist') // path 会在根目录生成一个dist的文件
},
</code></pre></div><blockquote><p>这种情形打包出来的是 main.js</p></blockquote> <ol start="2"><li>有这个需求，需要把打包文件里面的js文件生成两个，
修改entry和output的配置,让output的输出变成一个占位符。这样就能生成两个js</li></ol> <div class="language- extra-class"><pre class="language-text"><code>entry: {
  main:'./src/index.js',
  sub:'./src/index.js'
}, // 入口文件
output: { //输出文件
  filename: '[name].js',  
  path: path.resolve(__dirname, 'dist') // path 会在根目录生成一个dist的文件
},
</code></pre></div><p>3.有时候我们需要打包好吧index.html给后端作为入口文件，里面引入的js文件前面加上域名，比如cdn什么的，这时候在output里面添加
publicPath:域名，</p> <div class="language- extra-class"><pre class="language-text"><code>output: {  // 告诉webpack打好包以后放在那个文件夹。dist是自动生成的
  publicPath:'https://ww.cdn.com',
  filename: '[name].js',
  path: path.resolve(__dirname, 'dist')
}
</code></pre></div><p>打包好的html文件</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://ww.cdn.com/aa.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://ww.cdn.com/bb.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><a href="https://webpack.js.org/concepts/output/" target="_blank" rel="noopener noreferrer">官网解释<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="五、sourcemap的配置"><a href="#五、sourcemap的配置" aria-hidden="true" class="header-anchor">#</a> 五、sourceMap的配置</h3> <p>我们知道webpack把所有的js代码打包到一快，有时候开发环境下没问题，但是生产环境下就有问题。但是代码全部都打包压缩了，根本不知道那里有问题，这个时候sourceMap就出场了。sourceMap顾名思义 就是 资源导图，它会告诉你现在打包好的js文件，运行出错的时候，对应没有打包的js文件的哪一行那一列。这下子就知道怎么修改了。</p> <p>它是一种映射关系，它映射了打包后的代码和源代码之间的对应关系，一般通过devtool来配置。</p> <p>webpack.config.js的代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// path为Node的核心模块</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackplugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span><span class="token string">'development'</span><span class="token punctuation">,</span>
  devtool<span class="token punctuation">:</span><span class="token string">'source-map'</span><span class="token punctuation">,</span> <span class="token comment">// 配置这一行</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// 告诉webpack打包的入口文件在哪里，它从这里找，开始打包</span>
  module<span class="token punctuation">:</span><span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
     
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span><span class="token punctuation">[</span>
  
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 告诉webpack打好包以后放在那个文件夹。dist是自动生成的</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>devtool:的sourceMap的配置很多个选项。涉及到打包速度的快慢问题，这是官网的配置</p> <p><img src="https://user-gold-cdn.xitu.io/2019/8/8/16c705c21f32c956?w=732&amp;h=949&amp;f=jpeg&amp;s=114468" alt="sourceMap"></p> <p>devtool: 配置的选项</p> <p>build: 第一次打包的速度</p> <p>rebuild: 以后打包的速度</p> <p>production: 是否是生产环境</p> <p>quality: 打包的质量</p> <ol><li><p>devtools:'sourceMap'，可以开启这个功能，如果配置了sourcemap.打包的速度会变慢的。</p></li> <li><p>使用sourcemap以后，你会发现，打包好的文件里面，有个.js.map的映射文件</p></li> <li><p>官方文档 配置 里面， 有个选项 devtool.里面有很详细的使用方法，</p></li></ol> <p>（1）sourceMap.打包出一个xx.js.map的文件</p> <p>（2）inline-source-map，会把map的文件取消，转换成一个base64的行字符串加在打包的js文件里面.</p> <p>（3）inline-cheap-source-map，上面的两个会把哪一行，那一列错的位置告诉我们，但是这个会把那一列去到，提高性能。</p> <p>（4）cheap-module-eval-source-map,开发使用这个最好，全面，速度还快一点    <strong>开发环境</strong></p> <p>（5）cheap-module-source-map，生产使用这个比较好，mode：producton   <strong>生产环境</strong></p> <h3 id="六、使用webpackdevserver提升开发的效率"><a href="#六、使用webpackdevserver提升开发的效率" aria-hidden="true" class="header-anchor">#</a> 六、使用WebpackDevServer提升开发的效率</h3> <p>我我们在上面的开发步骤发现，只要你有修改，都需要进行重新打包，手动打开index.html去在浏览器查看，如果修改比较多的话，很浪费时间，所以需要一个提高效率的工具，WebpackDevServer很重要，因为跟我们前端开发日常息息相关。我们有时候使用vue，react 会发现启动了一个8080端口，3000端口。帮我们本地开了一个小型的服务。同时ajax请求数据（ajax必须在服务器上才能通过http协议请求数据），都是WebpackDevServer的功劳。搭配热更新效率更加好，下面我们就详细学习一下</p> <ol><li><p>我们在开发中会遇到这样的问题，就是每次修改完代码，都需要手动执行打包的命令，然后在dist 文件夹打开index.html的页面，更新了。还要重新打包，回到浏览器刷新，费劲。</p></li> <li><p>现在有了WebpackDevServer就不用这么费劲了，因为它能时刻监听你是否更新，并且自动打包，生成一个小型本地服务，并自动更新浏览器的页面，那么怎们用呢</p></li></ol> <div class="language- extra-class"><pre class="language-text"><code>npm install webpack-dev-server -D
</code></pre></div><p>在index.js页面内容里面随便加一行代码</p> <p>index.js代码</p> <div class="language- extra-class"><pre class="language-text"><code>console.log(1233)
</code></pre></div><p>webpack.config.js代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// path为Node的核心模块</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackplugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span><span class="token string">'development'</span><span class="token punctuation">,</span>
  devtool<span class="token punctuation">:</span><span class="token string">'source-map'</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span><span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>  
  devServer<span class="token punctuation">:</span><span class="token punctuation">{</span> <span class="token comment">// 添加一个devServer的模块，启动小服务，端口8020的（可以自己设置）</span>
    contentBase<span class="token punctuation">:</span><span class="token string">'./dist'</span><span class="token punctuation">,</span> <span class="token comment">// 服务启在那个文件夹下</span>
    port<span class="token punctuation">:</span><span class="token number">8020</span> <span class="token comment">// 端口号自己定</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span><span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token operator">...</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span><span class="token punctuation">[</span>
   <span class="token operator">...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>  <span class="token comment">// 告诉webpack打好包以后放在那个文件夹。dist是自动生成的</span>
    filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>package.json里面</p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;name&quot;: &quot;webpack-jue&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;scripts&quot;: {
    &quot;bundle&quot;: &quot;webpack&quot;, // 更新后需要每次手动的打包。。。。
    &quot;watch&quot;: &quot;webpack --watch&quot;, // 更新后，不用手动打包，但是要手动刷新浏览器
    &quot;start&quot;: &quot;webpack-dev-server&quot; // 只要代码变更，保存，自动打包，刷新浏览器
  },
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;devDependencies&quot;: {
    &quot;autoprefixer&quot;: &quot;^9.6.1&quot;,
    &quot;clean-webpack-plugin&quot;: &quot;^3.0.0&quot;,
    &quot;css-loader&quot;: &quot;^3.1.0&quot;,
    &quot;file-loader&quot;: &quot;^4.1.0&quot;,
    &quot;html-webpack-plugin&quot;: &quot;^3.2.0&quot;,
    &quot;install&quot;: &quot;^0.13.0&quot;,
    &quot;node-sass&quot;: &quot;^4.12.0&quot;,
    &quot;npm&quot;: &quot;^6.10.3&quot;,
    &quot;postcss-loader&quot;: &quot;^3.0.0&quot;,
    &quot;sass-loader&quot;: &quot;^7.1.0&quot;,
    &quot;style-loader&quot;: &quot;^0.23.1&quot;,
    &quot;url-loader&quot;: &quot;^2.1.0&quot;,
    &quot;webpack&quot;: &quot;^4.38.0&quot;,
    &quot;webpack-cli&quot;: &quot;^3.3.6&quot;,
    &quot;webpack-dev-server&quot;: &quot;^3.8.0&quot;
  }
}

</code></pre></div><h3 id="七、hot-module-replacement-热模块更新"><a href="#七、hot-module-replacement-热模块更新" aria-hidden="true" class="header-anchor">#</a> 七、Hot Module Replacement 热模块更新</h3> <p>模块热更新(HMR)的理解：它能够让我们在不刷新浏览器(或自动刷新)的前提下，在运行时帮我们更新最新的代码。</p> <p>模块热更新(HMR)已内置到 Webpack ,我们只需要在webpack.config.js中像下面这样简单的配置即可，无需安装别的东西。</p> <p>webpack.config.js代码</p> <div class="language- extra-class"><pre class="language-text"><code>const webpack = require('webpack');
module.exports = {
  // 其它配置
  devServer: {
    contentBase: 'dist',
    open: true,
    port: 3000,
    hot: true, // 启用模块热更新
    hotOnly: true // 模块热更新启动失败时，重新刷新浏览器
  },
  plugins: [
    // 其它插件
    new webpack.HotModuleReplacementPlugin()
  ]
}
</code></pre></div><p>在模块热更新(HMR)配置完毕后，我们现在来想一下，什么样的代码是我们希望能够热更新的，我们发现大多数情况下，我们似乎只需要关心两部分内容：CSS文件和.js文件，根据这两部分，我们将分别来进行介绍。</p> <h4 id="css中的模块热更新"><a href="#css中的模块热更新" aria-hidden="true" class="header-anchor">#</a> CSS中的模块热更新</h4> <p>首先我们在src目录下新建一个style.css样式文件，它的代码可以这样下：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">div:nth-of-type(odd)</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>随后我们改写一下src目录下的index.js中的代码，像下面这样子：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'./style.css'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btn<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'新增'</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>btn<span class="token punctuation">)</span><span class="token punctuation">;</span>

btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  dom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'item'</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>dom<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>由于我们需要处理CSS文件，所以我们需要保留处理CSS文件的loader规则，像下面这样
（其他loader配置不用动，单独加这个css规则就行）</p> <p>webpack.config.js代码</p> <div class="language- extra-class"><pre class="language-text"><code>module.exports = {
  // 其它配置
  module: {
    rules: [
      {
        test: /\.css$/,
        use: ['style-loader', 'css-loader']
      }
    ]
  }
}
</code></pre></div><p>在以上代码添加和配置完毕后，我们使用npm run start进行打包，我们点击按钮后，它会出现如下的情况 打包结果</p> <p>理解： 由于item是动态生成的，当我们要将red颜色改变成yellow时，模块热更新能帮我们在不刷新浏览器的情况下，替换掉样式的内容。直白来说：自动生成的item依然存在，只是颜色变了。</p> <h3 id="八、使用bable处理es6语法"><a href="#八、使用bable处理es6语法" aria-hidden="true" class="header-anchor">#</a> 八、使用bable处理Es6语法</h3> <p>我们在开发的时候会写到ES6语法，但是这个语法，好多的浏览器不支持，
所以需要各种办法去吧ES6的语法转换我ES5，这就用到了bable
使用之前，先下载三个依赖</p> <div class="language- extra-class"><pre class="language-text"><code>// babel-loader是和webpack建立连接的桥梁，
// @babel/core 是bable的核心库
   
$ npm install babel-loader @babel/core --save-dev

// @babel/preset-env这个模块是吧es6转换为es5的模块

$ npm install @babel/preset-env --save-dev

//  @babel/polyfilles5转换为es5语法转了，但是有些变量或者方法，浏览器还是不
//  认识，所以这个模块就是这个个别的方法或者变量的补丁，

$ npm install @babel/polyfill --save-dev
</code></pre></div><p>安装完以后，我们改一下页面的目录
src只留下index.js入口文件就可以了
同事在根目录新建一个.babelrc的文件</p> <div class="language- extra-class"><pre class="language-text"><code>|-- webpack(名字随便起)
|   |--src
    | |--index.js
    | |--index.html
|   |-- webpack.config.js
|   |-- package.json
|   |-- .babelrc
</code></pre></div><p>webpack.config.js的代码,loader部分新加一个babel-loader</p> <div class="language- extra-class"><pre class="language-text"><code>// path为Node的核心模块
const path = require('path');
const HtmlWebpackplugin = require('html-webpack-plugin')
const { CleanWebpackPlugin } = require('clean-webpack-plugin');

module.exports = {
  mode:'development',
  devtool:'source-map',
  entry: {
    main:'./src/index.js',
  },  
  devServer:{
   ......
  },
  module:{
    rules:[
      { test: /\.js$/,
        exclude: /node_modules/,
        loader: &quot;babel-loader&quot; ,
      },
      ....
      ]
  },
  plugins:[
   ......
  ],
  output: {  
  ......
  }
}
</code></pre></div><p>.babelrc文件</p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;presets&quot;: [[&quot;@babel/preset-env&quot;, {
    &quot;corejs&quot;: 2,// 目的是，按需引入需要的es6补充语法，如果不设置，就是全局引入，包会很大。
    &quot;useBuiltIns&quot;: &quot;usage&quot; // 如果不配置，polyfill补丁会把所有的es补丁补充上
    ，代码打包很大，这个配置上，按需补充，就会很小
  }]]
}
</code></pre></div><p>index.js代码</p> <div class="language- extra-class"><pre class="language-text"><code>// index.js代码

var fn = x =&gt; x * x;

</code></pre></div><p>执行打包命令</p> <div class="language- extra-class"><pre class="language-text"><code>npm run build
</code></pre></div><p>查看main.js的代码，会发现已经转换为es5语法，</p> <h3 id="webpakc总体流程"><a href="#webpakc总体流程" aria-hidden="true" class="header-anchor">#</a> webpakc总体流程</h3> <p>（1）确定入口：根据配置中的 entry 找出所有的入口文件；</p> <p>（2）编译模块：从入口文件出发，调用所有配置的 Loader 对模块进行翻译，再找出该模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理；</p> <p>（3）完成模块编译：在经过第4步使用 Loader 翻译完所有模块后，得到了每个模块被翻译后的最终内容以及它们之间的依赖关系；再根据plugin的插件进行响应的配置修改</p> <p>（4）输出资源：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk，再把每个 Chunk 转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会；</p> <p>（5）输出完成：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统</p> <h2 id="webpack4-学习之路（5）-高级概念"><a href="#webpack4-学习之路（5）-高级概念" aria-hidden="true" class="header-anchor">#</a> webpack4 学习之路（5）-高级概念</h2> <h3 id="一、tree-shaking-概念以及如何使用"><a href="#一、tree-shaking-概念以及如何使用" aria-hidden="true" class="header-anchor">#</a> 一、Tree shaking 概念以及如何使用</h3> <ul><li>Tree Shaking，树枝摇晃，是一个术语，通常用于描述移除js中未使用的代码。
比如我们在开发中，有一个模块有大量的方法，但是引用其中一个方法，打包的时候，其他没有用的方法也会打包，就会代码冗余，所以需要设置一下，吧不需要的方法，不打包。</li></ul> <p>注意</p> <div class="language- extra-class"><pre class="language-text"><code>Tree Shaking 只适用于ES
Module语法(既通过export导出，import引入)，因为它依赖于ES
Module的静态结构特性。
</code></pre></div><p>下面我们重新改造一下目录</p> <p>我们需要现在src目录下新建一个math.js文件，它的代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">minus</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">-</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>接下来我们对index.js做一下处理，它的代码像下面这样，从math.js中引用add方法并调用：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> add <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./math'</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>对webpack.config.js做一下配置，让它支持Tree Shaking，它的改动如下：</p> <div class="language- extra-class"><pre class="language-text"><code>const path = require('path');
module.exports = {
  mode: 'development',
  devtool: 'source-map',
  entry: {
    main: './src/index.js'
  },
  ...
  ...
  ...
  optimization: {
    usedExports: true
  },
  ...
  ...
  ...
  output: {
    filename: 'main.js',
    path: path.resolve(__dirname,'dist')
  }
}
</code></pre></div><p>修改package.json的文件配置，添加一行sideEffects的属性</p> <p>由于Tree Shaking作用于所有通过import引入的文件，如果我们引入第三方库，例如：import _ from 'lodash'或者.css文件，例如import './style.css' 时，如果我们不 做限制的话，Tree Shaking将起副作用，会认为没有导出，就把这个模块全部否定不打包。SideEffects属性能帮我们解决这个问题：它告诉webpack，我们可以对哪些文件不做 Tree Shaking</p> <div class="language- extra-class"><pre class="language-text"><code>// 如果不希望对任何文件进行此配置，可以设置sideEffects属性值为false
// *.css 表示 对所有css文件不做 Tree Shaking
// @babael/polyfill 表示 对@babel/polyfill不做 Tree Shaking
&quot;sideEffects&quot;: [
  &quot;*.css&quot;,
  &quot;@babel/polyfill&quot;
],
</code></pre></div><p>配置完毕后，我们依然使用npx webpack进行打包，可以看到，它的打包结果如下所示：</p> <p><img src="https://user-gold-cdn.xitu.io/2019/8/28/16cd60f00de26599?w=1722&amp;h=306&amp;f=png&amp;s=84279" alt="WeChat6bb43657c137362605efd33e85e5d5ff.png"></p> <p>打包代码分析：以上代码是一段被压缩过后的代码，我们可以看到，上面只有add方法，未使用的minus方法并没有被打包进来，这说明在开发环境下我们的Tree Shaking起了作用。</p> <p>这是开发环境，如果是生产环境，optimization 这个属性就不用配置了。但是sideEffects还是需要配置的。打包一下。还是这个效果，没有用的方法，就不会打包进去。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.296096c9.js" defer></script><script src="/assets/js/2.93ca5cf4.js" defer></script><script src="/assets/js/34.21aa3ad6.js" defer></script>
  </body>
</html>
